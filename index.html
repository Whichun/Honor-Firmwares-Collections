<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Honor 固件归档</title>
<link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">Honor 固件归档</div>
    <div class="searchwrap"><input id="search" placeholder="搜索文件或标签..." /></div>
  </header>

  <main class="main">
    <aside class="sidebar" id="sidebar"></aside>

    <section class="content">
      <div class="breadcrumb" id="breadcrumb">全部文件</div>

      <div class="table-wrap">
        <table class="file-table" id="fileTable" aria-describedby="tableDesc">
          <thead>
            <tr>
              <th class="col-name">文件名称</th>
              <th class="col-date">修改时间</th>
              <th class="col-size">大小</th>
            </tr>
          </thead>
          <tbody id="tableBody">
            <!-- 动态行 -->
          </tbody>
        </table>
        <div id="noData" class="no-data" style="display:none">该文件夹为空</div>
      </div>
    </section>
  </main>

  <footer class="footer">托管在 GitHub Pages — 所有资源来自本仓库</footer>

<!-- 在加载主脚本前确保常用容器存在（回退创建），并给主脚本加上缓存跳过参数 -->
<script>
  (function(){
    const ids = ['breadcrumb','folderTitle','fileList','tableBody','sidebar','noData'];
    ids.forEach(id=>{
      if(!document.getElementById(id)){
        // tableBody 要尽量放到现有 table 内
        if(id === 'tableBody'){
          const tbl = document.querySelector('.file-table') || document.getElementById('fileTable');
          if(tbl){
            const tb = document.createElement('tbody');
            tb.id = 'tableBody';
            tbl.appendChild(tb);
            return;
          }
        }
        const el = document.createElement('div');
        el.id = id;
        // 给回退节点最小样式，避免布局完全崩掉
        el.style.padding = '6px';
        el.style.margin = '4px 0';
        if(id === 'noData') el.className = 'no-data';
        document.body.appendChild(el);
        console.warn('[fallback] 已创建回退元素 #' + id);
      }
    });
  })();
</script>

<!-- 加上 ?v=2 避免旧脚本被缓存 -->
<script src="js/app.js?v=2"></script>

</body>
</html>

